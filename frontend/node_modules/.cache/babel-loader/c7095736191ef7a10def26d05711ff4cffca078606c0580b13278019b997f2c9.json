{"ast":null,"code":"import { mockApiService, shouldUseMockApi } from './mockApi';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\n// デバッグ用のログ出力\nconsole.log('API_BASE_URL:', API_BASE_URL);\nconsole.log('Environment:', process.env.REACT_APP_ENV || 'development');\nconsole.log('Should use mock API:', shouldUseMockApi());\nexport const apiService = {\n  // 口座情報を取得\n  async getAccounts(userId) {\n    // モックAPIを使用する場合\n    if (shouldUseMockApi()) {\n      console.log('Using mock API for accounts');\n      return mockApiService.getAccounts(userId);\n    }\n    try {\n      const url = `${API_BASE_URL}/accounts/user/${userId}`;\n      console.log('Fetching accounts from:', url);\n      const response = await fetch(url);\n      console.log('Accounts response status:', response.status);\n      console.log('Accounts response headers:', response.headers);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Accounts API error response:', errorText);\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n      const data = await response.json();\n      console.log('Accounts data received:', data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching accounts:', error);\n\n      // APIが利用できない場合、モックAPIにフォールバック\n      console.log('Falling back to mock API for accounts');\n      return mockApiService.getAccounts(userId);\n    }\n  },\n  // 取引履歴を取得\n  async getTransactions(userId) {\n    // モックAPIを使用する場合\n    if (shouldUseMockApi()) {\n      console.log('Using mock API for transactions');\n      return mockApiService.getTransactions(userId);\n    }\n    try {\n      const url = `${API_BASE_URL}/transactions/user/${userId}`;\n      console.log('Fetching transactions from:', url);\n      const response = await fetch(url);\n      console.log('Transactions response status:', response.status);\n      console.log('Transactions response headers:', response.headers);\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Transactions API error response:', errorText);\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n      const data = await response.json();\n      console.log('Transactions data received:', data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching transactions:', error);\n\n      // APIが利用できない場合、モックAPIにフォールバック\n      console.log('Falling back to mock API for transactions');\n      return mockApiService.getTransactions(userId);\n    }\n  }\n};","map":{"version":3,"names":["mockApiService","shouldUseMockApi","API_BASE_URL","process","env","REACT_APP_API_URL","console","log","REACT_APP_ENV","apiService","getAccounts","userId","url","response","fetch","status","headers","ok","errorText","text","error","Error","data","json","getTransactions"],"sources":["C:/devlop/internet-banking/frontend/src/services/api.ts"],"sourcesContent":["import { mockApiService, shouldUseMockApi } from './mockApi';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\n// デバッグ用のログ出力\nconsole.log('API_BASE_URL:', API_BASE_URL);\nconsole.log('Environment:', process.env.REACT_APP_ENV || 'development');\nconsole.log('Should use mock API:', shouldUseMockApi());\n\nexport interface Account {\n  id: number;\n  userId: number;\n  accountNumber: string;\n  accountType: string;\n  balance: number;\n  currency: string;\n  status: string;\n  interestRate: number;\n}\n\nexport interface Transaction {\n  id: number;\n  fromAccountId: number;\n  toAccountId: number | null;\n  transactionType: string;\n  amount: number;\n  currency: string;\n  description: string;\n  status: string;\n  referenceNumber: string;\n  transactionDate: string;\n}\n\nexport const apiService = {\n  // 口座情報を取得\n  async getAccounts(userId: number): Promise<Account[]> {\n    // モックAPIを使用する場合\n    if (shouldUseMockApi()) {\n      console.log('Using mock API for accounts');\n      return mockApiService.getAccounts(userId);\n    }\n\n    try {\n      const url = `${API_BASE_URL}/accounts/user/${userId}`;\n      console.log('Fetching accounts from:', url);\n      \n      const response = await fetch(url);\n      console.log('Accounts response status:', response.status);\n      console.log('Accounts response headers:', response.headers);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Accounts API error response:', errorText);\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n      \n      const data = await response.json();\n      console.log('Accounts data received:', data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching accounts:', error);\n      \n      // APIが利用できない場合、モックAPIにフォールバック\n      console.log('Falling back to mock API for accounts');\n      return mockApiService.getAccounts(userId);\n    }\n  },\n\n  // 取引履歴を取得\n  async getTransactions(userId: number): Promise<Transaction[]> {\n    // モックAPIを使用する場合\n    if (shouldUseMockApi()) {\n      console.log('Using mock API for transactions');\n      return mockApiService.getTransactions(userId);\n    }\n\n    try {\n      const url = `${API_BASE_URL}/transactions/user/${userId}`;\n      console.log('Fetching transactions from:', url);\n      \n      const response = await fetch(url);\n      console.log('Transactions response status:', response.status);\n      console.log('Transactions response headers:', response.headers);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Transactions API error response:', errorText);\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n      \n      const data = await response.json();\n      console.log('Transactions data received:', data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching transactions:', error);\n      \n      // APIが利用できない場合、モックAPIにフォールバック\n      console.log('Falling back to mock API for transactions');\n      return mockApiService.getTransactions(userId);\n    }\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}