{"ast":null,"code":"import{mockApiService,shouldUseMockApi}from'./mockApi';const API_BASE_URL=process.env.REACT_APP_API_URL||'/api';// デバッグ用のログ出力\nconsole.log('API_BASE_URL:',API_BASE_URL);console.log('Environment:',process.env.REACT_APP_ENV||'development');console.log('Should use mock API:',shouldUseMockApi());export const apiService={// 口座情報を取得\nasync getAccounts(userId){// モックAPIを使用する場合\nif(shouldUseMockApi()){console.log('Using mock API for accounts');return mockApiService.getAccounts(userId);}try{const url=\"\".concat(API_BASE_URL,\"/accounts/user/\").concat(userId);console.log('Fetching accounts from:',url);const response=await fetch(url);console.log('Accounts response status:',response.status);console.log('Accounts response headers:',response.headers);if(!response.ok){const errorText=await response.text();console.error('Accounts API error response:',errorText);throw new Error(\"HTTP error! status: \".concat(response.status,\", message: \").concat(errorText));}const data=await response.json();console.log('Accounts data received:',data);return data;}catch(error){console.error('Error fetching accounts:',error);// APIが利用できない場合、モックAPIにフォールバック\nconsole.log('Falling back to mock API for accounts');return mockApiService.getAccounts(userId);}},// 取引履歴を取得\nasync getTransactions(userId){// モックAPIを使用する場合\nif(shouldUseMockApi()){console.log('Using mock API for transactions');return mockApiService.getTransactions(userId);}try{const url=\"\".concat(API_BASE_URL,\"/transactions/user/\").concat(userId);console.log('Fetching transactions from:',url);const response=await fetch(url);console.log('Transactions response status:',response.status);console.log('Transactions response headers:',response.headers);if(!response.ok){const errorText=await response.text();console.error('Transactions API error response:',errorText);throw new Error(\"HTTP error! status: \".concat(response.status,\", message: \").concat(errorText));}const data=await response.json();console.log('Transactions data received:',data);return data;}catch(error){console.error('Error fetching transactions:',error);// APIが利用できない場合、モックAPIにフォールバック\nconsole.log('Falling back to mock API for transactions');return mockApiService.getTransactions(userId);}}};","map":{"version":3,"names":["mockApiService","shouldUseMockApi","API_BASE_URL","process","env","REACT_APP_API_URL","console","log","REACT_APP_ENV","apiService","getAccounts","userId","url","concat","response","fetch","status","headers","ok","errorText","text","error","Error","data","json","getTransactions"],"sources":["C:/devlop/internet-banking/frontend/src/services/api.ts"],"sourcesContent":["import { mockApiService, shouldUseMockApi } from './mockApi';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\n// デバッグ用のログ出力\nconsole.log('API_BASE_URL:', API_BASE_URL);\nconsole.log('Environment:', process.env.REACT_APP_ENV || 'development');\nconsole.log('Should use mock API:', shouldUseMockApi());\n\nexport interface Account {\n  id: number;\n  userId: number;\n  accountNumber: string;\n  accountType: string;\n  balance: number;\n  currency: string;\n  status: string;\n  interestRate: number;\n}\n\nexport interface Transaction {\n  id: number;\n  fromAccountId: number;\n  toAccountId: number | null;\n  transactionType: string;\n  amount: number;\n  currency: string;\n  description: string;\n  status: string;\n  referenceNumber: string;\n  transactionDate: string;\n}\n\nexport const apiService = {\n  // 口座情報を取得\n  async getAccounts(userId: number): Promise<Account[]> {\n    // モックAPIを使用する場合\n    if (shouldUseMockApi()) {\n      console.log('Using mock API for accounts');\n      return mockApiService.getAccounts(userId);\n    }\n\n    try {\n      const url = `${API_BASE_URL}/accounts/user/${userId}`;\n      console.log('Fetching accounts from:', url);\n      \n      const response = await fetch(url);\n      console.log('Accounts response status:', response.status);\n      console.log('Accounts response headers:', response.headers);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Accounts API error response:', errorText);\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n      \n      const data = await response.json();\n      console.log('Accounts data received:', data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching accounts:', error);\n      \n      // APIが利用できない場合、モックAPIにフォールバック\n      console.log('Falling back to mock API for accounts');\n      return mockApiService.getAccounts(userId);\n    }\n  },\n\n  // 取引履歴を取得\n  async getTransactions(userId: number): Promise<Transaction[]> {\n    // モックAPIを使用する場合\n    if (shouldUseMockApi()) {\n      console.log('Using mock API for transactions');\n      return mockApiService.getTransactions(userId);\n    }\n\n    try {\n      const url = `${API_BASE_URL}/transactions/user/${userId}`;\n      console.log('Fetching transactions from:', url);\n      \n      const response = await fetch(url);\n      console.log('Transactions response status:', response.status);\n      console.log('Transactions response headers:', response.headers);\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('Transactions API error response:', errorText);\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorText}`);\n      }\n      \n      const data = await response.json();\n      console.log('Transactions data received:', data);\n      return data;\n    } catch (error) {\n      console.error('Error fetching transactions:', error);\n      \n      // APIが利用できない場合、モックAPIにフォールバック\n      console.log('Falling back to mock API for transactions');\n      return mockApiService.getTransactions(userId);\n    }\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}